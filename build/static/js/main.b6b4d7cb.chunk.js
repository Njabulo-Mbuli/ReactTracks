(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{255:function(e,a,t){e.exports=t(445)},445:function(e,a,t){"use strict";t.r(a);var n=t(22),r=t(0),c=t.n(r),i=t(31),l=t.n(i),o=t(451),u=t(453),s=t(452),m=t(33),d=t(71),p=t.n(d),g=t(106),f=t.n(g),E=t(87),b=t.n(E),v=Object(m.createMuiTheme)({palette:{primary:{light:p.a[500],main:p.a[700],dark:p.a[900]},secondary:{light:f.a[300],main:f.a[500],dark:f.a[700]}},typography:{useNextVariants:!0}});var h=function(e){return function(a){return c.a.createElement(m.MuiThemeProvider,{theme:v},c.a.createElement(b.a,null),c.a.createElement(e,a))}},k=t(18),y=t(19),j=t(12),O=t(6),w=t.n(O),x=t(24),N=t.n(x),S=t(39),I=t.n(S),T=t(100),C=t.n(T),$=t(26),L=t.n($),W=t(34),F=t.n(W),B=t(179),q=t.n(B);function A(){var e=Object(n.a)(["\nquery($search:String){\n  tracks(search:$search){\n    id\n    title\n    description\n    url\n    likes{\n      id\n    }\n    postedBy{\n      id\n      username\n    }\n  }\n}\n"]);return A=function(){return e},e}var D=Object(y.b)(A()),R=w()((function(e){return{root:{padding:"2px 4px",margin:e.spacing.unit,display:"flex",alignItems:"center"}}}))((function(e){var a=e.classes,t=e.setSearchResults,n=Object(r.useState)(""),i=Object(j.a)(n,2),l=i[0],o=i[1],u=Object(r.useRef)(),s=function(){t([]),o(""),u.current.focus()};return c.a.createElement(k.a,null,(function(e){return c.a.createElement("form",{onSubmit:function(a){return function(e,a){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,N.a.awrap(a.query({query:D,variables:{search:l}}));case 3:n=r.sent,t(n.data.tracks);case 5:case"end":return r.stop()}}))}(a,e)}},c.a.createElement(L.a,{className:a.root,elevation:1},c.a.createElement(F.a,{onClick:s,disabled:!l},l&&c.a.createElement(C.a,null)),c.a.createElement(I.a,{onChange:function(e){return o(e.target.value)},fullWidth:!0,value:l,inputRef:u,placeholder:"Search All Tracks",InputProps:{disableUnderline:!0}}),c.a.createElement(F.a,null,c.a.createElement(q.a,null))))}))})),U=t(67),z=t.n(U),P=t(91),_=t.n(P),M=t(92),J=t.n(M),G=t(21),Q=t.n(G),Y=t(89),Z=t.n(Y),V=t(93),H=t.n(V),K=t(90),X=t.n(K),ee=t(94),ae=t.n(ee),te=t(185),ne=t.n(te),re=t(181),ce=t.n(re),ie=function(e){var a=e.url;return c.a.createElement("div",null,c.a.createElement(ce.a,{url:a,height:"30px",width:"300px",controls:!0}))},le=t(182),oe=t.n(le);function ue(){var e=Object(n.a)(["\n  mutation($trackId:Int!){\n    createLike(trackId:$trackId){\n      track{\n        id\n        likes{\n          id\n        }\n      }\n    }\n  }\n"]);return ue=function(){return e},e}var se=Object(y.b)(ue()),me=w()((function(e){return{iconButton:{color:"deeppink"},icon:{marginLeft:e.spacing.unit/2}}}))((function(e){var a=e.classes,t=e.trackId,n=e.likeCount,i=Object(r.useContext)(Da),l=function(){var e=!1;i.likeSet.map((function(a){a.track.id==t&&(e=!0)}));return e};return c.a.createElement(k.c,{mutation:se,variables:{trackId:t},refetchQueries:function(){return[{query:Ra}]}},(function(e){return c.a.createElement(F.a,{disabled:l(),onClick:function(a){a.stopPropagation(),e()},className:a.iconButton},n,c.a.createElement(oe.a,{className:a.icon}))}))})),de=t(183),pe=t.n(de);function ge(){var e=Object(n.a)(["\n  mutation($trackId:Int!){\n    deleteTrack(trackId:$trackId){\n      trackId\n    }\n  }\n"]);return ge=function(){return e},e}var fe=Object(y.b)(ge()),Ee=function(e){var a=e.track;return Object(r.useContext)(Da).id===a.postedBy.id&&c.a.createElement(k.c,{mutation:fe,variables:{trackId:a.id},refetchQueries:function(){return[{query:ra}]}},(function(e){return c.a.createElement(F.a,{onClick:e},c.a.createElement(pe.a,null))}))},be=t(36),ve=t(102),he=t.n(ve),ke=t(184),ye=t.n(ke),je=t(20),Oe=t.n(je),we=t(44),xe=t.n(we),Ne=t(48),Se=t.n(Ne),Ie=t(46),Te=t.n(Ie),Ce=t(47),$e=t.n(Ce),Le=t(25),We=t.n(Le),Fe=t(52),Be=t.n(Fe),qe=t(45),Ae=t.n(qe),De=t(58),Re=t.n(De),Ue=t(103),ze=t.n(Ue),Pe=t(88),_e=t.n(Pe),Me=w()((function(e){return{snackbar:{margin:e.spacing.unit}}}))((function(e){var a=e.classes,t=e.error,n=Object(r.useState)(!0),i=Object(j.a)(n,2),l=i[0],o=i[1];return c.a.createElement(_e.a,{open:l,className:a.snackbar,message:t.message,action:c.a.createElement(Oe.a,{onClick:function(){return o(!1)},color:"secondary",size:"small"},"Close")})}));function Je(){var e=Object(n.a)(["\nmutation($trackId:Int!, $title:String, $url:String){\n  updateTrack(trackId: $trackId, title:$title,url:$url,description:$description){\n    track{\n      id\n      title\n      description\n      url \n      likes{\n        id\n      }\n      postedBy{\n        id\n        username\n      }\n    }\n  }\n}\n"]);return Je=function(){return e},e}var Ge=Object(y.b)(Je()),Qe=w()((function(e){return{container:{display:"flex",flexWrap:"wrap"},dialog:{margin:"0 auto",maxWidth:550},textField:{margin:e.spacing.unit},cancel:{color:"red"},save:{color:"green"},button:{margin:2*e.spacing.unit},icon:{marginLeft:e.spacing.unit},input:{display:"none"}}}))((function(e){var a=e.classes,t=e.track,n=Object(r.useContext)(Da),i=Object(r.useState)(!1),l=Object(j.a)(i,2),o=l[0],u=l[1],s=Object(r.useState)(t.title),m=Object(j.a)(s,2),d=m[0],p=m[1],g=Object(r.useState)(t.description),f=Object(j.a)(g,2),E=f[0],b=f[1],v=Object(r.useState)(),h=Object(j.a)(v,2),y=h[0],O=h[1],w=Object(r.useState)(!1),x=Object(j.a)(w,2),S=x[0],T=x[1],C=Object(r.useState)(""),$=Object(j.a)(C,2),L=$[0],W=$[1],B=n.id===t.postedBy.id,q=function(){var e,a;return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(e=new FormData).append("file",y),e.append("resource_type","raw"),e.append("upload_preset","react-tracks"),e.append("cloud_name","njabulombuli"),t.next=8,N.a.awrap(he.a.post("https://api.cloudinary.com/v1_1/njabulombuli/raw/upload",e));case 8:return a=t.sent,t.abrupt("return",a.data.url);case 12:t.prev=12,t.t0=t.catch(0),console.error("Error uploading file",t.t0),T(!1);case 16:case"end":return t.stop()}}),null,null,[[0,12]])};return B&&c.a.createElement(c.a.Fragment,null,c.a.createElement(F.a,{onClick:function(){return u(!0)}},c.a.createElement(ye.a,null)),c.a.createElement(k.c,{mutation:Ge,onCompleted:function(e){T(!1),u(!1),p(""),b(""),O("")}},(function(e,n){n.loading;var r,i=n.error;return i?c.a.createElement(Me,{error:i}):c.a.createElement(xe.a,{className:a.dialog,open:o},c.a.createElement("form",{onSubmit:function(a){return function(e,a){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),T(!0),r.next=4,N.a.awrap(q());case 4:n=r.sent,a({variables:{trackId:t.id,title:d,description:E,url:n}});case 6:case"end":return r.stop()}}))}(a,e)}},c.a.createElement(Ae.a,null,"Update Track"),c.a.createElement(Te.a,null,c.a.createElement($e.a,null,"Add a Title, Description & Audio File (under 10MB)"),c.a.createElement(We.a,{fullWidth:!0},c.a.createElement(I.a,{value:d,label:"Title",placeholder:"Add Title",onChange:function(e){return p(e.target.value)},className:a.TextField})),c.a.createElement(We.a,{fullWidth:!0},c.a.createElement(I.a,{value:E,multiline:!0,rows:"2",label:"Description",onChange:function(e){return b(e.target.value)},placeholder:"Add Description",className:a.TextField})),c.a.createElement(We.a,{error:!!L},c.a.createElement("input",{required:!0,id:"audio",type:"file",accept:"audio/*",onChange:function(e){return function(e){var a=e.target.files[0];a&&a.size>1e7?W("".concat(a.name,": FILE SIZE IS TOO LARGE")):(O(a),W(""))}(e)},className:a.input}),c.a.createElement("label",{htmlFor:"audio"},c.a.createElement(Oe.a,{variant:"outlined",color:y?"secondary":"inherit",component:"span",className:a.button},"Audio File",c.a.createElement(ze.a,{className:a.icon})),y&&y.name,c.a.createElement(Be.a,null,L)))),c.a.createElement(Se.a,null,c.a.createElement(Oe.a,{disabled:S,className:a.cancel,onClick:function(){return u(!1)}},"Cancel"),c.a.createElement(Oe.a,(r={type:"submit",disabled:S},Object(be.a)(r,"disabled",S||!d.trim()||!E.trim()||!y),Object(be.a)(r,"className",a.save),r),S?c.a.createElement(Re.a,{className:a.save,size:24}):"Update Track"))))})))})),Ye=t(186),Ze=t.n(Ye),Ve=w()({root:{display:"flex",flexWrap:"wrap"},details:{alignItems:"center"},link:{color:"#424242",textDecoration:"none","&:hover":{color:"black"}}})((function(e){var a=e.classes,t=e.tracks;return c.a.createElement(z.a,null,t.map((function(e){return c.a.createElement(Z.a,{key:e.id},c.a.createElement(X.a,{expandIcon:c.a.createElement(ne.a,null)},c.a.createElement(_.a,{className:a.root},c.a.createElement(me,{trackId:e.id,likeCount:e.likes.length}),c.a.createElement(J.a,{primaryTypographyProps:{variant:"subheading",color:"primary"},primary:e.title,secondary:c.a.createElement(Ze.a,{className:a.link,to:"/profile/".concat(e.postedBy.id)},e.postedBy.username)}),c.a.createElement(ie,{url:e.url}))),c.a.createElement(H.a,{className:a.details},c.a.createElement(Q.a,{variant:"body1"},e.description)),c.a.createElement(ae.a,null,c.a.createElement(Qe,{track:e}),c.a.createElement(Ee,{track:e})))})))})),He=t(187),Ke=t.n(He);function Xe(){var e=Object(n.a)(["\nmutation($title:String!,$description:String!,$url:String!){\n  createTrack(title:$title,description:$description,url:$url){\n    track{\n      id\n      title\n      description\n      url\n    }\n  }\n}\n"]);return Xe=function(){return e},e}var ea=Object(y.b)(Xe()),aa=w()((function(e){return{container:{display:"flex",flexWrap:"wrap"},dialog:{margin:"0 auto",maxWidth:550},textField:{margin:e.spacing.unit},cancel:{color:"red"},save:{color:"green"},button:{margin:2*e.spacing.unit},icon:{marginLeft:e.spacing.unit},input:{display:"none"},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit,zIndex:"200"}}}))((function(e){var a=e.classes,t=Object(r.useState)(!1),n=Object(j.a)(t,2),i=n[0],l=n[1],o=Object(r.useState)(""),u=Object(j.a)(o,2),s=u[0],m=u[1],d=Object(r.useState)(""),p=Object(j.a)(d,2),g=p[0],f=p[1],E=Object(r.useState)(""),b=Object(j.a)(E,2),v=b[0],h=b[1],y=Object(r.useState)(!1),O=Object(j.a)(y,2),w=O[0],x=O[1],S=Object(r.useState)(""),T=Object(j.a)(S,2),$=T[0],L=T[1],W=function(){var e,a;return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(e=new FormData).append("file",v),e.append("resource_type","raw"),e.append("upload_preset","react-tracks"),e.append("cloud_name","njabulombuli"),t.next=8,N.a.awrap(he.a.post("https://api.cloudinary.com/v1_1/njabulombuli/raw/upload",e));case 8:return a=t.sent,t.abrupt("return",a.data.url);case 12:t.prev=12,t.t0=t.catch(0),console.error("Error uploading file",t.t0),x(!1);case 16:case"end":return t.stop()}}),null,null,[[0,12]])};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe.a,{variant:"fab",className:a.fab,color:"secondary",onClick:function(){return l(!0)}},i?c.a.createElement(C.a,null):c.a.createElement(Ke.a,null)),c.a.createElement(k.c,{mutation:ea,onCompleted:function(e){x(!1),l(!1),m(""),f(""),h("")},refetchQueries:function(){return[{query:ra}]}},(function(e,t){t.loading;var n,r=t.error;return r?c.a.createElement(Me,{error:r}):c.a.createElement(xe.a,{className:a.dialog,open:i},c.a.createElement("form",{onSubmit:function(a){return function(e,a){var t;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),x(!0),n.next=4,N.a.awrap(W());case 4:t=n.sent,a({variables:{title:s,description:g,url:t}});case 6:case"end":return n.stop()}}))}(a,e)}},c.a.createElement(Ae.a,null,"Create Track"),c.a.createElement(Te.a,null,c.a.createElement($e.a,null,"Add a Title, Description & Audio File (under 10MB)"),c.a.createElement(We.a,{fullWidth:!0},c.a.createElement(I.a,{value:s,label:"Title",placeholder:"Add Title",onChange:function(e){return m(e.target.value)},className:a.TextField})),c.a.createElement(We.a,{fullWidth:!0},c.a.createElement(I.a,{value:g,multiline:!0,rows:"2",label:"Description",onChange:function(e){return f(e.target.value)},placeholder:"Add Description",className:a.TextField})),c.a.createElement(We.a,{error:!!$},c.a.createElement("input",{required:!0,id:"audio",type:"file",accept:"audio/*",onChange:function(e){return function(e){var a=e.target.files[0];a&&a.size>1e7?L("".concat(a.name,": FILE SIZE IS TOO LARGE")):(h(a),L(""))}(e)},className:a.input}),c.a.createElement("label",{htmlFor:"audio"},c.a.createElement(Oe.a,{variant:"outlined",color:v?"secondary":"inherit",component:"span",className:a.button},"Audio File",c.a.createElement(ze.a,{className:a.icon})),v&&v.name,c.a.createElement(Be.a,null,$)))),c.a.createElement(Se.a,null,c.a.createElement(Oe.a,{disabled:w,className:a.cancel,onClick:function(){return l(!1)}},"Cancel"),c.a.createElement(Oe.a,(n={type:"submit",disabled:w},Object(be.a)(n,"disabled",w||!s.trim()||!g.trim()||!v),Object(be.a)(n,"className",a.save),n),w?c.a.createElement(Re.a,{className:a.save,size:24}):"Add Track"))))})))})),ta=t(104);function na(){var e=Object(n.a)(["\n  query getTracksQuery{\n    tracks{\n      id\n      title\n      description\n      url\n      likes{\n        id\n      }\n      postedBy{\n        id\n        username\n      }\n\n    }\n  }\n"]);return na=function(){return e},e}var ra=Object(y.b)(na()),ca=w()((function(e){return{container:{margin:"0 auto",maxWidth:960,padding:2*e.spacing.unit}}}))((function(e){var a=e.classes,t=Object(r.useState)([]),n=Object(j.a)(t,2),i=n[0],l=n[1];return c.a.createElement("div",{className:a.container},c.a.createElement(R,{setSearchResults:l}),c.a.createElement(aa,null),c.a.createElement(k.d,{query:ra},(function(e){var a=e.data,t=e.loading,n=e.error;if(t)return c.a.createElement(ta.a,null);if(n)return c.a.createElement(Me,null);var r=i.length>0?i:a.tracks;return c.a.createElement(Ve,{tracks:r})})))})),ia=t(95),la=t.n(ia),oa=t(96),ua=t.n(oa),sa=t(49),ma=t.n(sa),da=t(190),pa=t.n(da),ga=t(189),fa=t.n(ga),Ea=t(69),ba=t.n(Ea),va=t(188),ha=t.n(va),ka=w()((function(e){return{root:{width:"100vw",textAlign:"center"},progress:{margin:2*e.spacing.unit,color:e.palette.secondary.dark}}}))((function(e){var a=e.classes;return c.a.createElement("div",{className:a.root},c.a.createElement(ta.a,{className:a.progress}))}));function ya(){var e=Object(n.a)(["\nquery($userId:Int!){\n  user(id:$userId){\n    id\n    username\n    dateJoined\n    trackSet{\n      id\n      title\n      url\n      likes{\n        id\n      }\n    }\n    likeSet{\n      id\n      track{\n        id\n        title\n        url\n        likes{\n          id\n        }\n        postedBy{\n          id\n          username\n        }\n      }\n    }\n  }\n}\n"]);return ya=function(){return e},e}var ja=Object(y.b)(ya()),Oa=w()((function(e){return{paper:Object(be.a)({width:"auto",display:"block",padding:2*e.spacing.unit,marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},e.breakpoints.up("md"),{width:650,marginLeft:"auto",marginRight:"auto"}),card:{display:"flex",justifyContent:"center"},title:{display:"flex",alignItems:"center",marginBottom:2*e.spacing.unit},audioIcon:{color:"purple",fontSize:30,marginRight:e.spacing.unit},thumbIcon:{color:"green",marginRight:e.spacing.unit},divider:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}}))((function(e){var a=e.classes,t=e.match.params.id;return c.a.createElement(k.d,{query:ja,variables:{userId:t}},(function(e){var t=e.data,n=e.loading,r=e.error;return n?c.a.createElement(ka,null):r?c.a.createElement(Me,{error:r}):c.a.createElement("div",null,c.a.createElement(la.a,{className:a.card},c.a.createElement(ua.a,{avatar:c.a.createElement(ma.a,null,t.user.username[0]),title:t.user.username,subheader:"Joined ".concat(ha()(t.user.dateJoined,"MMM Do, YYYY"))})),c.a.createElement(L.a,{elevation:1,className:a.paper},c.a.createElement(Q.a,{variant:"title",className:a.title},c.a.createElement(fa.a,{className:a.audio}),"Created Tracks"),t.user.trackSet.map((function(e,n){return c.a.createElement("div",{key:e.id},c.a.createElement(Q.a,null,e.title," \xb7 ",e.likes.length," \xb7 Likes"),c.a.createElement(ie,{url:e.url}),n<t.user.trackSet.length-1&&c.a.createElement(ba.a,{className:a.divider}))}))),c.a.createElement(L.a,{elevation:1,className:a.paper},c.a.createElement(Q.a,{variant:"title",className:a.title},c.a.createElement(pa.a,{className:a.thumbIcon}),"Liked Tracks"),t.user.likeSet.map((function(e,n){var r=e.track;return c.a.createElement("div",{key:r.id},c.a.createElement(Q.a,null,r.title," \xb7 ",r.likes.length," \xb7 Likes \xb7 PostedBy: ",r.postedBy.username),c.a.createElement(ie,{url:r.url}),n<t.user.likeSet.length-1&&c.a.createElement(ba.a,{className:a.divider}))}))))}))})),wa=t(97),xa=t.n(wa),Na=t(98),Sa=t.n(Na),Ia=t(192),Ta=t.n(Ia),Ca=t(193),$a=t.n(Ca),La=t(450),Wa=t(191),Fa=t.n(Wa),Ba=w()({root:{cursor:"pointer",display:"flex"},buttonIcon:{marginLeft:"5px"}})((function(e){var a=e.classes;return c.a.createElement(k.a,null,(function(e){return c.a.createElement(Oe.a,{onClick:function(){return function(e){localStorage.removeItem("authToken"),e.writeData({data:{isLoggedIn:!1}}),console.log("Signed out user",e)}(e)}},c.a.createElement(Q.a,{variant:"body1",className:a.buttonText,color:"secondary"},"Signout"),c.a.createElement(Fa.a,{className:a.buttonIcon,color:"secondary"}))}))})),qa=w()((function(e){return{root:{flexGrow:1,margin:0,padding:0},grow:{flexGrow:1,display:"flex",alignItems:"center",textDecoration:"none"},logo:{marginRight:e.spacing.unit,fontSize:45},faceIcon:{marginRight:e.spacing.unit,fontSize:30,color:"white"},username:{color:"white",fontSize:30}}}))((function(e){var a=e.classes,t=e.currentUser;return c.a.createElement(xa.a,{position:"static",className:a.root},c.a.createElement(Sa.a,null,c.a.createElement(La.a,{to:"/",className:a.grow},c.a.createElement(Ta.a,{className:a.logo,color:"secondary"}),c.a.createElement(Q.a,{variant:"headline",color:"secondary",noWrap:!0},"Tracks")),t&&c.a.createElement(La.a,{to:"/profile/".concat(t.id),className:a.grow},c.a.createElement($a.a,{className:a.faceIcon}),c.a.createElement(Q.a,{variant:"headline",className:a.username,noWrap:!0},t.username)),c.a.createElement(Ba,null)))}));function Aa(){var e=Object(n.a)(["\n        {\n            me{\n                id\n                username\n                email\n                likeSet{\n                    track{\n                        id\n                    }\n                }\n            }\n        }\n"]);return Aa=function(){return e},e}var Da=c.a.createContext(),Ra=Object(y.b)(Aa()),Ua=h((function(){return c.a.createElement(k.d,{query:Ra,fetchPolicy:"cache-and-network"},(function(e){var a=e.data,t=e.loading,n=e.error;if(t)return c.a.createElement(ka,null);if(n)return c.a.createElement(Me,{error:n});var r=a.me;return c.a.createElement(o.a,null,c.a.createElement(Da.Provider,{value:r},c.a.createElement(qa,{currentUser:r}),c.a.createElement(u.a,null,c.a.createElement(s.a,{exact:!0,path:"/",component:ca}),c.a.createElement(s.a,{path:"/profile/:id",component:Oa}))))}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var za=t(35),Pa=t.n(za),_a=t(40),Ma=t.n(_a),Ja=t(195),Ga=t.n(Ja);function Qa(){var e=Object(n.a)(["\nmutation($username:String!,$password:String!){\n  tokenAuth(username:$username,password:$password){\n    token\n  }\n}\n"]);return Qa=function(){return e},e}var Ya=Object(y.b)(Qa()),Za=w()((function(e){return{root:Object(be.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up("md"),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:2*e.spacing.unit},title:{marginTop:2*e.spacing.unit,color:e.palette.secondary.main},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}}}))((function(e){var a=e.classes,t=e.setNewUser,n=Object(r.useState)(""),i=Object(j.a)(n,2),l=i[0],o=i[1],u=Object(r.useState)(""),s=Object(j.a)(u,2),m=s[0],d=s[1];return c.a.createElement("div",{className:a.root},c.a.createElement(L.a,{className:a.paper},c.a.createElement(ma.a,{className:a.avatar},c.a.createElement(Ga.a,null)),c.a.createElement(Q.a,{variant:"title"},"Login as Existing User"),c.a.createElement(k.c,{mutation:Ya,variables:{username:l,password:m}},(function(e,n){var r=n.loading,i=n.error,u=(n.called,n.client);return c.a.createElement("form",{onSubmit:function(a){return function(e,a,t){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,N.a.awrap(a());case 3:n=r.sent,localStorage.setItem("authToken",n.data.tokenAuth.token),t.writeData({data:{isLoggedIn:!0}});case 6:case"end":return r.stop()}}))}(a,e,u)},className:a.form},c.a.createElement(We.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"username"},"Username"),c.a.createElement(Pa.a,{id:"username",onChange:function(e){return o(e.target.value)}})),c.a.createElement(We.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"password"},"Password"),c.a.createElement(Pa.a,{id:"password",type:"password",onChange:function(e){return d(e.target.value)}})),c.a.createElement(Oe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:r||!l.trim()||!m.trim(),className:a.submit},r?"Logging in...":"Login"),c.a.createElement(Oe.a,{color:"secondary",variant:"outlined",fullWidth:!0,onClick:function(){return t(!0)}},"New user? Register here"),i&&c.a.createElement(Me,{error:i}))}))))})),Va=t(68),Ha=t.n(Va),Ka=t(196),Xa=t.n(Ka),et=t(197),at=t.n(et);function tt(){var e=Object(n.a)(["\nmutation($username:String!,$email:String!,$password:String!){\n  createUser(username:$username,email:$email,password:$password){\n\t\tuser{\n      username\n      email\n    }    \n  }\n}\n"]);return tt=function(){return e},e}function nt(e){return c.a.createElement(Ha.a,Object.assign({direction:"up"},e))}var rt=Object(y.b)(tt()),ct=w()((function(e){return{root:Object(be.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up("md"),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:2*e.spacing.unit},title:{marginTop:2*e.spacing.unit,color:e.palette.openTitle},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},icon:{padding:"0px 2px 2px 0px",verticalAlign:"middle",color:"green"}}}))((function(e){var a=e.classes,t=e.setNewUser,n=Object(r.useState)(""),i=Object(j.a)(n,2),l=i[0],o=i[1],u=Object(r.useState)(""),s=Object(j.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(""),g=Object(j.a)(p,2),f=g[0],E=g[1],b=Object(r.useState)(!1),v=Object(j.a)(b,2),h=v[0],y=v[1];return c.a.createElement("div",{className:a.root},c.a.createElement(L.a,{className:a.paper},c.a.createElement(ma.a,{className:a.avatar},c.a.createElement(Xa.a,null)),c.a.createElement(Q.a,{variant:"headline"},"Register"),c.a.createElement(k.c,{mutation:rt,variables:{username:l,email:f,password:m},onCompleted:function(e){console.log({data:e}),y(!0)}},(function(e,n){var r=n.loading,i=n.error;return c.a.createElement("form",{onSubmit:function(a){return function(e,a){return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,N.a.awrap(a());case 3:t.sent;case 4:case"end":return t.stop()}}))}(a,e)},className:a.form},c.a.createElement(We.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"username"},"Username"),c.a.createElement(Pa.a,{id:"username",onChange:function(e){return o(e.target.value)}})),c.a.createElement(We.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"email"},"Email"),c.a.createElement(Pa.a,{id:"email",type:"email",onChange:function(e){return E(e.target.value)}})),c.a.createElement(We.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"password"},"Password"),c.a.createElement(Pa.a,{id:"password",type:"password",onChange:function(e){return d(e.target.value)}})),c.a.createElement(Oe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",disabled:r||!l.trim()||!f.trim()||!m.trim(),className:a.submit},r?"Registering...":"Register"),c.a.createElement(Oe.a,{color:"primary",variant:"outlined",fullWidth:!0,onClick:function(){return t(!1)}},"Previous user? Log in here"),i&&c.a.createElement(Me,{error:i}))}))),c.a.createElement(xe.a,{open:h,disableBackdropClick:!0,TransitionComponent:nt},c.a.createElement(Ae.a,null,c.a.createElement(at.a,{className:a.icon}),"New Account"),c.a.createElement(Te.a,null,c.a.createElement($e.a,null,"User successfully created!")),c.a.createElement(Se.a,null,c.a.createElement(Oe.a,{color:"primary",variant:"contained",onClick:function(){return t(!1)}},"Login"))))})),it=h((function(){var e=Object(r.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1];return t?c.a.createElement(ct,{setNewUser:n}):c.a.createElement(Za,{setNewUser:n})}));function lt(){var e=Object(n.a)(["\n    query{\n        isLoggedIn @client\n    }\n"]);return lt=function(){return e},e}var ot=new y.a({uri:"http://tracksbackend.njabulombuli.co.za/",fetchOptions:{credentials:"include"},request:function(e){var a=localStorage.getItem("authToken")||"";e.setContext({headers:{Authorization:"JWT ".concat(a)}})},clientState:{defaults:{isLoggedIn:!!localStorage.getItem("authToken")}}}),ut=Object(y.b)(lt());l.a.render(c.a.createElement(k.b,{client:ot},c.a.createElement(k.d,{query:ut},(function(e){return e.data.isLoggedIn?c.a.createElement(Ua,null):c.a.createElement(it,null)}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[255,1,2]]]);
//# sourceMappingURL=main.b6b4d7cb.chunk.js.map